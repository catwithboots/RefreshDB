<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">
  <Product Id="*" Name="SQL Server Database Refresh - WebAPI" Language="1033" Version="0.0.0.1" Manufacturer="Schuberg Philis" UpgradeCode="4745b535-0c62-443f-8503-bfce2e7ce9db">
    <Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" />

    <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
    <MediaTemplate EmbedCab="yes" />
    
    <Feature Id="ProductFeature" Title="SQL Server Database Refresh - WebAPI" Level="1">
      <ComponentGroupRef Id="ProductComponents" />
      <!--<ComponentRef Id="WebConfigExample"/>
      <ComponentRef Id="CopyWebConfig"/>-->
      <ComponentGroupRef Id="RefreshDB.WebAPI.Backend_Project"/>
      <ComponentGroupRef Id="SQLRefreshDBIisConfiguration"/>
    </Feature>

    <Icon Id="sbpdemo.ico" SourceFile="InstallerFiles\sbpdemo.ico"/>
    <Property Id="ARPPRODUCTICON" Value="sbpdemo.ico" />
  </Product>

  <Fragment>
    <Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="INETPUB" Name="Inetpub" ComponentGuidGenerationSeed="6F6C211E-3CA1-4E87-A41C-D8BF4907D25D">
        <Directory Id="INSTALLFOLDER" Name="RefreshDB" />
        <!--<Component Id="WebConfigExample">
          <File Id="WebConfigExample" Name="Web.Example.config" KeyPath="yes" Source="SourceDir\Web.Example.config"></File>
        </Component>-->
      </Directory>
    </Directory>
    <DirectoryRef Id="TARGETDIR">
      <!--<Component Id="CopyWebConfig" Guid="823AD8D0-C03C-4974-813F-18404E96FA30">
        <CopyFile Id="CopyWebConfig" FileId="WebConfigExample" DestinationName="Web.config" DestinationDirectory="INSTALLFOLDER"/>
      </Component>-->
    </DirectoryRef>
  </Fragment>

  <Fragment>
    <ComponentGroup Id="ProductComponents" Directory="INSTALLFOLDER">
      <Component Id="ProductComponent" Guid="B3AABA1C-4947-4776-A557-2BDA3329F9FF">
        <CreateFolder/>
      <!-- TODO: Remove the comments around this Component element and the ComponentRef below in order to add resources to this installer. -->
      <!-- <Component Id="ProductComponent"> -->
      <!-- TODO: Insert files, registry keys, and other resources here. -->
      <!-- </Component> -->
      </Component>
    </ComponentGroup>
  </Fragment>
</Wix>